# 🚀 快速部署指南

## ✅ 已完成的准备工作

我已经帮你完成了以下配置:

1. ✅ 修改了环境变量配置 (`.env.local`)
2. ✅ 修复了代码中的环境变量引用 (`services/zhipuService.ts`)
3. ✅ 添加了 TypeScript 类型定义 (`vite-env.d.ts`)
4. ✅ 创建了一键部署脚本 (`deploy.sh`)

---

## 🎯 三种部署方式

### 方式一: Vercel 部署 (最推荐,5 分钟完成)

#### 步骤 1: 准备 GitHub 仓库

```bash
# 如果还没有 Git 仓库,先初始化
git init
git add .
git commit -m "准备部署"

# 在 GitHub 创建新仓库,然后推送
git remote add origin https://github.com/你的用户名/仓库名.git
git branch -M main
git push -u origin main
```

#### 步骤 2: 在 Vercel 部署

1. 访问 [vercel.com](https://vercel.com)
2. 用 GitHub 账号登录
3. 点击 **"Add New Project"**
4. 选择你的 GitHub 仓库
5. 配置项目:
   - **Framework Preset**: Vite (自动检测)
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
6. **重要!** 添加环境变量:
   - 点击 **"Environment Variables"**
   - 变量名: `VITE_ZHIPU_API_KEY`
   - 变量值: `7b6a31b15a4840d89b8f2455cbe11b44.w4XDtgGDjv7iU9Wg`
   - 环境: 全选 (Production, Preview, Development)
7. 点击 **"Deploy"**

#### 步骤 3: 访问网站

部署成功后,Vercel 会给你一个域名:

```
https://your-project.vercel.app
```

---

### 方式二: 使用命令行部署 (适合开发者)

```bash
# 1. 安装 Vercel CLI
npm install -g vercel

# 2. 登录
vercel login

# 3. 使用一键部署脚本
./deploy.sh

# 或者手动部署
vercel --prod
```

**注意**: 部署后需要在 Vercel 网站上手动添加环境变量 `VITE_ZHIPU_API_KEY`

---

### 方式三: Netlify 部署

1. 访问 [netlify.com](https://www.netlify.com)
2. 用 GitHub 登录
3. 点击 **"Add new site"** → **"Import an existing project"**
4. 选择 GitHub 仓库
5. 配置:
   - **Build command**: `npm run build`
   - **Publish directory**: `dist`
6. 添加环境变量:
   - **Key**: `VITE_ZHIPU_API_KEY`
   - **Value**: `7b6a31b15a4840d89b8f2455cbe11b44.w4XDtgGDjv7iU9Wg`
7. 点击 **"Deploy site"**

---

## 🔍 本地测试部署版本

在正式部署前,建议先本地测试:

```bash
# 1. 构建项目
npm run build

# 2. 预览构建结果
npm run preview
```

访问 `http://localhost:4173` 检查是否正常。

---

## ⚠️ 重要提示

### 环境变量配置

**必须使用 `VITE_` 前缀!**

- ✅ 正确: `VITE_ZHIPU_API_KEY`
- ❌ 错误: `ZHIPU_API_KEY`

在部署平台配置环境变量时,变量名必须是 `VITE_ZHIPU_API_KEY`

### API Key 安全

虽然 API Key 会暴露在客户端代码中,但这对于纯前端应用是正常的。建议:

1. 在智谱 AI 控制台设置 API Key 的使用限额
2. 定期检查 API 使用情况
3. 如果发现异常使用,及时更换 API Key

---

## 📝 部署检查清单

- [ ] 代码已推送到 GitHub
- [ ] 本地构建测试通过 (`npm run build`)
- [ ] 在部署平台添加了环境变量 `VITE_ZHIPU_API_KEY`
- [ ] 部署成功并能访问网站
- [ ] AI 功能测试通过(生成旁白、聊天、问答)
- [ ] 数据导入/导出功能正常
- [ ] 移动端访问正常

---

## 🎉 推荐流程

**最快的方式 (5 分钟)**:

1. 推送代码到 GitHub
2. 在 Vercel 导入仓库
3. 添加环境变量
4. 点击部署
5. 完成!

详细文档请查看 `部署指南.md`
